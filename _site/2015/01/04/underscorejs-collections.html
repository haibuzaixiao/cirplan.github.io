
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    
    <title>underscore.js Api -- collections | 萝拔</title>
    
    
    <meta name="author" content="dcirplan">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    
      <link href="/assets/themes/twitter/css/style.min.css?body=1" rel="stylesheet" type="text/css" media="all">
    
    
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico">
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    <!-- <script type="text/javascript" src="/assets/themes/twitter/js/jquery-2.1.1.min.js"></script> -->
    <script type="text/javascript" src="/assets/themes/twitter/js/prettify.js"></script>
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">萝拔</a>
          <ul class="nav">
            
            
            


  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">归档</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">分类</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">标签</a></li>
      	
      
    
  




            <li class="divider-vertical"></li>
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">关于</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  





           <!--  <li><a href="http://feed.zhuoqun.net/">订阅</a></li> -->
          </ul>

          <span class="pull-right slogan"> 业精于勤荒于嬉 行成于思毁于随 </span>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="row post">
  <div class="span11">
    <h1 class="title">underscore.js Api -- collections</h1>
    <div class="date f-c-b">Date：<span>04 January 2015</span></div>
    
    <div class="tag-n">Tag
      <ul class="tag_box">
      
      


  
     
    	<li><a href="/tags.html#js-ref">js <span>3</span></a></li>
     
    	<li><a href="/tags.html#underscore-ref">underscore <span>2</span></a></li>
     
    	<li><a href="/tags.html#api-ref">api <span>2</span></a></li>
    
  



      </ul>
     
      </div>
    
<blockquote>
  <p>转眼到了2015年，这一年还是要努力啊，赚钱赚钱赚钱。</p>
</blockquote>

<p>今天看<a href="http://underscorejs.org/">underscore.js</a>的collections部分。</p>

<p>导航：</p>

<ul>
  <li><a href="#each">each</a></li>
  <li><a href="#map">map</a></li>
  <li><a href="#reduce">reduce</a></li>
  <li><a href="#reduceRight">reduceRight</a></li>
  <li><a href="#find">find</a></li>
  <li><a href="#filter">filter</a></li>
  <li><a href="#where">where</a></li>
  <li><a href="#findWhere">findWhere</a></li>
  <li><a href="#reject">reject</a></li>
  <li><a href="#every">every</a></li>
  <li><a href="#some">some</a></li>
  <li><a href="#contains">contains</a></li>
  <li><a href="#invoke">invoke</a></li>
  <li><a href="#pluck">pluck</a></li>
  <li><a href="#max">max</a></li>
  <li><a href="#min">min</a></li>
  <li><a href="#sortBy">sortBy</a></li>
  <li><a href="#groupBy">groupBy</a></li>
  <li><a href="#indexBy">indexBy</a></li>
  <li><a href="#countBy">countBy</a></li>
  <li><a href="#shuffle">shuffle</a></li>
  <li><a href="#sample">sample</a></li>
  <li><a href="#toArray">toArray</a></li>
  <li><a href="#size">size</a></li>
  <li><a href="#partition">partition</a></li>
</ul>

<h2 id="collection-functions-arrays-or-objects--">Collection Functions (Arrays or Objects)  集合函数，参数是数组或对象</h2>

<p>Tip: Collection函数的参数可以是array， objects, 和array-like objects(类似数组对象)，
就如arguments(函数参数)，NodeList(Dom节点列表)和类似的对象。但由于其工作方式是duck-typing(鸭子模式？)，
所以避免传入的对象有length属性。</p>

<h4 id="each">each</h4>
<p><code>_.each(list, iteratee, [context])，Alias(别名): forEach</code></p>

<ul>
  <li>对于list里的每一个元素进行iteratee(迭代)函数的操作。</li>
  <li>当list是数组，iteratee的参数是(element, index, list)。</li>
  <li>当list是对象，iteratee的参数是(value, key, list)。</li>
  <li>each循环是不能中断的，如果要中断，可以用_.find代替</li>
  <li>
    <p>返回原list</p>

    <pre><code>  _.each([1, 2, 3], function(element, index, list) { });
  _.each({one: 1, two: 2, three: 3}, function(value, key, list) { });
</code></pre>
  </li>
</ul>

<h3 id="map">map</h3>
<p><code>_.map(list, iteratee, [context]) Alias: collect</code></p>

<ul>
  <li>和each很相似，参数都一样。</li>
  <li>
    <p>返回的是处理后的数组</p>

    <pre><code>  _.map([1, 2, 3], function(num){ return num * 3; });
  =&gt; [3, 6, 9]
  _.map({one: 1, two: 2, three: 3}, function(num, key){ return num * 3; });
  =&gt; [3, 6, 9]
</code></pre>
  </li>
</ul>

<h3 id="reduce">reduce</h3>
<p><code>_.reduce(list, iteratee, [memo], [context]) Aliases: inject, foldl</code></p>

<ul>
  <li>reduce把list里的所有值迭代成一个值。</li>
  <li>memo是迭代的初始值，参与每次迭代。如果没有定义memo的初值，memo则为list的第一个值。迭代从list的第二个元素开始。</li>
  <li>iteratee的参数(memo, value, index, list)</li>
  <li>
    <p>返回迭代的最终值。</p>

    <pre><code>  var sum = _.reduce([1, 2, 3], function(memo, num){ return memo + num; }, 0);
  =&gt; 6
</code></pre>
  </li>
</ul>

<h3 id="reduceright">reduceRight</h3>
<p><code>_.reduceRight(list, iteratee, memo, [context]) Alias: foldr</code></p>

<ul>
  <li>reduce的右结合版本。</li>
  <li>
    <p>如果javascript原生存在(v1.8)，则调用原生的reduceRight。</p>

    <pre><code>  var list = [[0, 1], [2, 3], [4, 5]];
  var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);
  =&gt; [4, 5, 2, 3, 0, 1]
</code></pre>
  </li>
</ul>

<h3 id="find">find</h3>
<p><code> _.find(list, predicate, [context]) Alias: detect </code></p>

<ul>
  <li>predicate的参数是<code>(value, key, list)</code>。</li>
  <li>
    <p>返回list中，第一个通过predicate验收的值。如果所有值都不通过验证，则返回undefined。</p>

    <pre><code>  var even = _.find([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
  =&gt; 2
</code></pre>
  </li>
</ul>

<h3 id="filter">filter</h3>
<p><code> _.filter(list, iterator, [context]) 别名: select </code></p>

<ul>
  <li>
    <p>find的全局版本，返回list中所有通过predicate验证的的数组。</p>

    <pre><code>  var evens = _.filter([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
  =&gt; [2, 4, 6]
</code></pre>
  </li>
</ul>

<h3 id="where">where</h3>
<p><code> _.where(list, properties) </code></p>

<ul>
  <li>对list中的每一个元素进行检查，返回数组。</li>
  <li>
    <p>返回数组里的每一项都包含properties的所有属性。</p>

    <pre><code>  _.where(listOfPlays, {author: "Shakespeare", year: 1611});
  =&gt; [{title: "Cymbeline", author: "Shakespeare", year: 1611},
      {title: "The Tempest", author: "Shakespeare", year: 1611}]
</code></pre>
  </li>
</ul>

<h3 id="findwhere">findWhere</h3>
<p><code> _.findWhere(list, properties) </code></p>

<ul>
  <li>where的单一版本，返回list中第一个包含properties所有属性的元素。</li>
  <li>
    <p>如果没有，返回undefined。</p>

    <pre><code>  _.findWhere(publicServicePulitzers, {newsroom: "The New York Times"});
  =&gt; {year: 1918, newsroom: "The New York Times",
    reason: "For its public service in publishing in full so many official reports,
    documents and speeches by European statesmen relating to the progress and
    conduct of the war."}
</code></pre>
  </li>
</ul>

<h3 id="reject">reject</h3>
<p><code>_.reject(list, predicate, [context]) </code> </p>

<ul>
  <li>
    <p>filter的相反函数，返回list中不符合predicate函数的值。</p>

    <pre><code>  var odds = _.reject([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; });
  =&gt; [1, 3, 5]
</code></pre>
  </li>
</ul>

<h3 id="every">every</h3>
<p><code> _.every(list, [predicate], [context]) Alias: all </code></p>

<ul>
  <li>
    <p>如果list中的所有值都通过predicate验证，返回true，否则返回false。</p>

    <pre><code>  _.every([true, 1, null, 'yes'], _.identity);
  =&gt; false
</code></pre>
  </li>
</ul>

<h3 id="some">some</h3>
<p><code> _.some(list, [predicate], [context]) Alias: any </code></p>

<ul>
  <li>
    <p>如果list中的任意一个元素通过predicate验证，停止并返回true，否则返回false。</p>

    <pre><code>  _.some([null, 0, 'yes', false]);
  =&gt; true
</code></pre>
  </li>
</ul>

<h3 id="contains">contains</h3>
<p><code> _.contains(list, value) Alias: include  </code></p>

<ul>
  <li>如果value在list中，返回true。否则返回false。</li>
  <li>
    <p>如果list是数组，调用的是indexOf方法。</p>

    <pre><code>  _.contains([1, 2, 3], 3);
  =&gt; true
</code></pre>
  </li>
</ul>

<h3 id="invoke">invoke</h3>
<p><code> _.invoke(list, methodName, *arguments) </code></p>

<ul>
  <li>对于list中的每一个元素，调用方法名为methodName的函数。</li>
  <li>
    <p>传入附加参数，会转给要调用的函数。</p>

    <pre><code>  _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');
  =&gt; [[1, 5, 7], [1, 2, 3]]
</code></pre>
  </li>
</ul>

<h3 id="pluck">pluck</h3>
<p><code> _.pluck(list, propertyName) </code></p>

<ul>
  <li>map的简单版本。</li>
  <li>
    <p>返回list中指定属性的值的数组。</p>

    <pre><code>  var stooges = [{name: 'moe', age: 40}, {name: 'larry', age: 50}, {name: 'curly', age: 60}];
  _.pluck(stooges, 'name');
  =&gt; ["moe", "larry", "curly"]
</code></pre>
  </li>
</ul>

<h3 id="max">max</h3>
<p><code> _.max(list, [iteratee], [context]) </code></p>

<ul>
  <li>返回list中最大值的value。</li>
  <li>
    <p>如果传入iteratee函数，则以iteratee函数为标准比较。</p>

    <pre><code>  var stooges = [{name: 'moe', age: 40}, {name: 'larry', age: 50}, {name: 'curly', age: 60}];
  _.max(stooges, function(stooge){ return stooge.age; });
  =&gt; {name: 'curly', age: 60};
</code></pre>
  </li>
</ul>

<h3 id="min">min</h3>
<p><code> _.min(list, [iteratee], [context]) </code></p>

<ul>
  <li>
    <p>max的想反函数。返回list中的最小项。</p>

    <pre><code>  var numbers = [10, 5, 100, 2, 1000];
  _.min(numbers);
  =&gt; 2
</code></pre>
  </li>
</ul>

<h3 id="sortby">sortBy</h3>
<p><code> _.sortBy(list, iteratee, [context]) </code></p>

<ul>
  <li>返回的是经过排序的list。</li>
  <li>
    <p>排序的标准是通过比较iteratee函数返回值的大小，或者是属性的名称。如：length。</p>

    <pre><code>  _.sortBy([1, 2, 3, 4, 5, 6], function(num){ return Math.sin(num); });
  =&gt; [5, 4, 6, 3, 1, 2]
</code></pre>
  </li>
</ul>

<h3 id="groupby">groupBy</h3>
<p><code> _.groupBy(list, iteratee, [context]) </code></p>

<ul>
  <li>把collection分成一个个的集合。</li>
  <li>
    <p>分组的标准是iteratee函数每个返回值；如果iteratee是字符串，则通过元素的属性值分组。</p>

    <pre><code>  _.groupBy([1.3, 2.1, 2.4], function(num){ return Math.floor(num); });
  =&gt; {1: [1.3], 2: [2.1, 2.4]}

  _.groupBy(['one', 'two', 'three'], 'length');
  =&gt; {3: ["one", "two"], 5: ["three"]}
</code></pre>
  </li>
</ul>

<h3 id="indexby">indexBy</h3>
<p><code> _.indexBy(list, iteratee, [context]) </code></p>

<ul>
  <li>返回的是类似于groupBy的对象，带有索引。</li>
  <li>
    <p>对于list的任何的元素, iteratee函数返回一个独一无二key。</p>

    <pre><code>  var stooges = [{name: 'moe', age: 40}, {name: 'larry', age: 50}, {name: 'curly', age: 60}];
  _.indexBy(stooges, 'age');
  =&gt; {
    "40": {name: 'moe', age: 40},
    "50": {name: 'larry', age: 50},
    "60": {name: 'curly', age: 60}
  }
</code></pre>
  </li>
</ul>

<h3 id="countby">countBy</h3>
<p><code> _.countBy(list, iteratee, [context]) </code></p>

<ul>
  <li>
    <p>把list分组，但返回的是每一组的数目。类似于groupBy。</p>

    <p>_.countBy([1, 2, 3, 4, 5], function(num) {
    return num % 2 == 0 ? ‘even’: ‘odd’;
  });
  =&gt; {odd: 3, even: 2}</p>
  </li>
</ul>

<h3 id="shuffle">shuffle</h3>
<p><code> _.shuffle(list) </code></p>

<ul>
  <li>
    <p>返回随机乱序数组</p>

    <p>_.shuffle([1, 2, 3, 4, 5, 6]);
  =&gt; [4, 1, 6, 3, 5, 2]</p>
  </li>
</ul>

<h3 id="sample">sample</h3>
<p><code> _.sample(list, [n]) </code></p>

<ul>
  <li>
    <p>随机返回list中的n个元素，如果n没有定义，则返回一个元素。</p>

    <pre><code>  _.sample([1, 2, 3, 4, 5, 6]);
  =&gt; 4

  _.sample([1, 2, 3, 4, 5, 6], 3);
  =&gt; [1, 6, 2]
</code></pre>
  </li>
</ul>

<h3 id="toarray">toArray</h3>
<p><code> _.toArray(list) </code></p>

<ul>
  <li>对于任何一个可以被迭代的list，返回一个数组。</li>
  <li>
    <p>对arguments对象的转换十分有用。</p>

    <pre><code>  (function(){ return _.toArray(arguments).slice(1); })(1, 2, 3, 4);
  =&gt; [2, 3, 4]
</code></pre>
  </li>
</ul>

<h3 id="size">size</h3>
<p><code> _.size(list) </code></p>

<ul>
  <li>
    <p>返回list中元素的个数。</p>

    <pre><code>  _.size({one: 1, two: 2, three: 3});
  =&gt; 3
</code></pre>
  </li>
</ul>

<h3 id="partition">partition</h3>
<p><code> _.partition(array, predicate) </code></p>

<ul>
  <li>
    <p>把array分成两组，一组满足predicate的验证，一组不满足predicate的验证。</p>

    <pre><code>  _.partition([0, 1, 2, 3, 4, 5], isOdd);
  =&gt; [[1, 3, 5], [0, 2, 4]]
</code></pre>
  </li>
</ul>

<p>参考：</p>

<ul>
  <li><a href="http://learningcn.com/underscore/">http://learningcn.com/underscore/</a></li>
</ul>


    <ul class="pager">
    
      <li class="previous"><a href="/2014/12/12/java-urlrewritefilter.html" title="java的urlrewritefilter简单使用">&larr; java的urlrewritefilter简单使用</a></li>
    
    
      <li class="next"><a href="/2015/01/04/year-review.html" title="2014年回顾">2014年回顾&rarr;</a></li>
    
    </ul>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'cirplanblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>





    <!-- 多说评论框 start -->
     <!-- <div class="ds-thread" data-thread-key="/2015/01/04/underscorejs-collections" data-title="underscore.js Api -- collections" data-url="http://jeffdeng.me/2015/01/04/underscorejs-collections.html"></div>-->
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
   <!-- <script type="text/javascript">
    var duoshuoQuery = {short_name:"jeffdeng"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>-->
    <!-- 多说公共JS代码 end -->

  </div>
  
</div>


      </div>

      <footer>
        <p>&copy; <a href="mailto:dcirplan@gmail.com">dcirplan</a> 2014. 
          Proudly powered by <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div> <!-- /container -->

    <!-- 



 -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46595250-3', 'auto');
      ga('send', 'pageview');

    </script>

    <script type="text/javascript">
      window.onload = function() {
        var doms = document.querySelectorAll('pre');

        for( var i = 0; i < doms.length; i++ ){
          doms[i].className += ' prettyprint ';
        }
        prettyPrint();
      };
     
    </script>

  </body>
</html>

